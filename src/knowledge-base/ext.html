<!doctype html>
<html lang="en">
    <head>
        {{> head}}
    </head>

    <body class="body">
        <div class="website">
            {{> header}}

            <!-- content -->
            <main class="content">
                <div class="container">
                    <div class="row">
                        <div class="col">
                            <article class="article">
                                <h1>Модулі та інтеграції</h1>

                                <p>
                                    Розширення системи, які в разі потреби можна підключити як
                                    додатковий функціонал. Безпосередньо на роботу основної системи
                                    не впливають. Підключити потрібний модуль можна в загальних
                                    налаштуваннях, після чого з'являються відповідні пункти меню.
                                </p>

                                <ul class="page-nav">
                                    <li><a href="#id1">Iнтеграція з Опенкарт</a></li>
                                    <li><a href="#id2">Iнтеграція з WooCommerce</a></li>
                                    <li><a href="#id3">Iнтеграція з PromUA</a></li>
                                    <li><a href="#id4">Iнтеграція з Хорошоп</a></li>
                                    <li><a href="#id5">Онлайн каталог</a></li>
                                    <li><a href="#id6">База знань</a></li>
                                    <li><a href="#id7">Проекти та завдання</a></li>
                                    <li><a href="#id8">Модуль фiскалiзацiї (ПРРО)</a></li>
                                    <li><a href="#id9">Iнтеграція з Новою Поштою</a></li>
                                    <li><a href="#id10">Підключення чат-бота</a></li>
                                    <li><a href="#id11">Iнтеграція з CheckBox</a></li>
                                    <li>
                                        <a href="#id12"
                                            >API для iнтеграцiї з боку зовнiшнiх систем</a
                                        >
                                    </li>
                                    <li><a href="#id13">Iнтеграція з ВчасноКаса</a></li>
                                    <li><a href="#id14">Iнтеграція з ВчасноДокументооборот</a></li>
                                    <li>
                                        <a href="#id15"
                                            >Пiдключення та використання принтерiв та торгiвельного
                                            обладнання</a
                                        >
                                    </li>
                                </ul>

                                <h2 class="page-nav--target" id="id1">Iнтеграція з Опенкарт</h2>

                                <p>
                                    Модуль до складської програми дозволяє отримувати нові
                                    замовлення з магазину, оновлювати в магазині статус виконаних
                                    замовлень, додавати в магазин нові товари, а також оновлювати зі
                                    складу кількість і ціни товарів. Для роботи необхідно встановити
                                    додаток для Опенкарт. Доповнення розширює стандартне API і може
                                    використовуватись для інтеграції з іншими складськими
                                    програмами. Доповнення до ІМ розташоване на
                                    <a target="_blank" href="https://github.com/leon-mbs/opencart"
                                        >GitHub</a
                                    >, там же опис і керівництво по установці на GitHub, там же опис
                                    і керівництво по установці.
                                </p>

                                <p>
                                    Для автоматичної синхронізації (оновлення цін, кількості та
                                    імпорту замовлень) в корені проекту є скрипт cron_updateoc.php,
                                    який можна додати до системного планувальника (cron або task
                                    sheduler). Також його можна викликати за адресою
                                    https://&lt;адреса сайту&gt;/cron_updateoc.php. На початку
                                    скрипта встановлюється назва статусу, з яким імпортуються
                                    замовлення.
                                </p>

                                <p>
                                    У Модулі-> Опенкарт-> Налаштування потрібно вказати адресу ІМ, а
                                    також аккаунт API, який створюється в адміністративній панелі
                                    Опенкарт.
                                </p>

                                <p>
                                    На сторінці Модулі-> Опенкарт-> Замовлення в складській системі
                                    вибираємо статус замовлень ІМ, які вважаються новими і
                                    завантажуємо список з магазину. Потім імпортуємо в складську
                                    програму. На кожний запис створюється документ Замовлення. На
                                    цій сторінці можна оновити статуси замовлень в ІМ після їх
                                    обробки.
                                </p>

                                <p>
                                    На сторінці Модулі-> Опенкарт-> Товари можна експортувати нові
                                    товари зі складу в магазин, а також імпортувати з магазину, якщо
                                    товар там виявився раніше. Відповідність товарів забезпечується
                                    по артикулу. Так само можна в будь який момент відновити в
                                    магазині ціни і кількість у відповідності зі складом.
                                </p>

                                <h2 class="page-nav--target" id="id2">Iнтеграція з WooCommerce</h2>

                                <p>
                                    Модуль по функціональності аналогічний модулю інтеграції з
                                    Опенкарт.
                                </p>

                                <p>
                                    У Модулі-> WooCommerce-> Налаштування потрібно вказати адресу
                                    ІМ, а також ключі, які створюються в адміністративній панелі
                                    магазину.
                                </p>

                                <h2 class="page-nav--target" id="id3">Iнтеграція з PromUA</h2>

                                <p>
                                    Модуль по функціональності аналогічний модулю інтеграції з
                                    Опенкарт.
                                </p>

                                <p>
                                    У Модулі-> PromUA-> Налаштування потрібно вказати адресу ІМ, а
                                    також ключ, який створюється в адміністративній панелі магазину.
                                </p>

                                <h2 class="page-nav--target" id="id4">Iнтеграція з Хорошоп</h2>

                                <p>
                                    Модуль по функціональності аналогічний модулю інтеграції з
                                    Опенкарт.
                                </p>

                                <p>
                                    У Модулі->Хорошоп-> Налаштування потрібно вказати адресу сайтуЮ
                                    логін та пароль (зі списку адмінів в хорошопі).
                                </p>

                                <h2 class="page-nav--target" id="id5">Онлайн каталог</h2>

                                <p>
                                    Невеликий модуль онлайн каталогу інтегрований з бухобліком і
                                    складським обліком. Особливість каталогу - ієрархічна система
                                    атрибутів товару, що дозволяє автоматично генерувати фільтри
                                    пошуку товару і сторінку порівняння.
                                </p>

                                <p>
                                    Наприклад, для категорії побутова техніка можна задати атрибути
                                    Вага і Розміри.
                                </p>

                                <p>
                                    Виставити каталог домашньою сторінкою можна в налаштуваннях
                                    модуля.
                                </p>

                                <p>
                                    Перейти в адмінку можна за адресою http://&lt;адреса
                                    сайту&gt;/store. На основі замовлень магазину автоматично
                                    створюються замовлення в журналі замовлень.
                                </p>

                                <p>
                                    Для налаштування магазину необхідно вибрати склад і вказати його
                                    в налаштуваннях модуля інтернет-магазину. Після цього товари
                                    будуть доступні в редагуванні каталогу в модулі магазину. Для
                                    відображення в каталогу в довіднику ТМЦ повиннин бути тип Товар
                                    та вказана категорія.
                                </p>

                                <p>Дизайн по дефолту - на Twitter Bootstrap.</p>

                                <figure>
                                    <img src="/images/ext/shop1.png" alt="catalog 1" />
                                </figure>

                                <figure>
                                    <img src="/images/ext/shop2.png" alt="catalog 2" />
                                </figure>

                                <figure>
                                    <img src="/images/ext/shop3.png" alt="catalog 3" />
                                </figure>

                                <h2 class="page-nav--target" id="id6">База знань</h2>

                                <p>
                                    Організатор для зберігання неструктурованих даних в ієрархічному
                                    вигляді. По суті вбудований проект <a href="/notty">Notty</a>.
                                    Оскільки користувачі є користувачами однієї корпоративної
                                    системи, додана можливість спільного перегляду і редагування
                                    топіків.
                                </p>

                                <h2 class="page-nav--target" id="id7">Проекти та завдання</h2>

                                <p>
                                    Менеджер завдань. Дозволяє призначати співробітникам різні
                                    завдання, що дає можливість контролювати хід виконання. Для
                                    завдань можна вказати пріоритет, поточний статус, час виконання
                                    на кожному етапі, додавати коментарі і прикріплювати файли.
                                    клієнтів. Завдання групуються в проекти.
                                </p>

                                <p>
                                    Також є можливість для співробітників фіксувати виконану роботу
                                    в тайм-трекері із зазначенням номеру завдання.
                                </p>

                                <p>
                                    Для адміністратора є таблиця статистики по проектам і
                                    співробітникам.
                                </p>

                                <h2 class="page-nav--target" id="id8">Модуль фiскалiзацiї РРО</h2>

                                <p>
                                    Модуль призначений для автоматичної відправки чеків і z-звітів в
                                    податкову.
                                </p>

                                <p>
                                    Для роботи модуля також потрібно ввести реєстраційні дані РРО з
                                    особистого кабінету в податковій. У довідник компаній ввести
                                    назву компанії, ЄДРПОУ та ІПН (для платників ПДВ) та налаштувати
                                    роботу з приватним ключем та сертифiкатом. Також потрібно
                                    вказати назву та адресу торгової точки, фіскальний і локальний
                                    номери в довіднику POS терміналів. У разі використання
                                    стороннього ключа (наприклад, ключа ПриватБанку) необхідно
                                    зареєструвати в особистому кабiнетi податкової ідентифікатор
                                    ключа, завантаженого у програму.
                                </p>

                                <p>
                                    Робота з фіскалізованими чеками ведеться, в основному, в АРМ
                                    касира. Перед початком роботи необхідно відкрити зміну для
                                    даного POS терміналу. Після закінчення роботи по клiку "закриття
                                    зміни" автоматично формується z-звіт і закривається зміна.
                                </p>

                                <p>
                                    Так само фіскалізація при виборі відповідного POS терміналу, на
                                    якому відкрита зміна вiдбувається при внесенні оплати в журналі
                                    оплат і в накладнiй на повернення.
                                </p>

                                <p>
                                    Дані з податкової (РРО, зміни і відправлені документи) можна
                                    переглянути на сторінці в модулі фіскалізації.
                                </p>

                                <p>
                                    В якості бібліотеки використовується проект
                                    <a href="https://github.com/leon-mbs/ppolib" target="_blank"
                                        >ppolib</a
                                    >. Додаткове ПЗ при цьому не потрібне, але бібліотека працює
                                    досить повільно. Зокрема, завантаження ключа займає до хвилини і
                                    може не виконатися на повільних серверах, тому бажано встановити
                                    тайм-аут роботи в кілька разів більше, ніж стандартні 30 сек,
                                    або використати зовнішній сервер.
                                </p>

                                <p>
                                    Завантаження (перевірка) ключів та сертифікатів виконується у
                                    довіднику POS терміналів.
                                </p>

                                <h2 class="page-nav--target" id="id9">Iнтеграція з Новою Поштою</h2>

                                <p>
                                    Модуль дає можливість створювати відправки через Api Нової Пошти
                                    та вiдслiдковувати їх статус.
                                </p>

                                <p>
                                    Перед початком використання в налаштуваннях модуля необхідно
                                    додати ключ доступу і дані відправника за замовчуванням.
                                    Декларація НП створюється в журналі Продажі при виборі в списку
                                    потрібної ТТН в статусi Готово до вiдправки.
                                </p>

                                <p>
                                    Перегляд і управління деклараціями на стороні НП здійснюється зі
                                    спеціальної сторінки в модулі.
                                </p>

                                <p>
                                    Перед початком роботи в налаштуваннях модуля необхідно оновити
                                    локальні довідники міст та відділень.
                                </p>

                                <p>
                                    Для прискорення роботи довідники міст і відділень попередньо
                                    скачуються і перiодично оновлюються натисканням кнопки Оновити
                                    на сторінці налаштувань модуля. Файли скачуються в папку uploads
                                    (з правом запису) в корені сайту.
                                </p>

                                <h2 class="page-nav--target" id="id10">
                                    Підключення телеграм чат-боту
                                </h2>

                                <p>
                                    Бот створюється стандартним способом за домомогою @BotFather.
                                    Токен, котрий буде при цьому сгенеровано, вводиться в загальних
                                    налаштуваннях. Після цього треба активувати діалог з
                                    новоствореним ботом. Перелік команд - /help. Щоб отримувати
                                    повідомлення потрібно залогінитись тим самим способом, як і на
                                    сайті.
                                </p>

                                <h2 class="page-nav--target" id="id11">Iнтеграція з CheckBox</h2>

                                <p>
                                    Для відправки чеків в ДПС яерез CheckBox потрібно ввімкнути
                                    модуль в загальних налаштуваннях та вкзати в довіднику кас (POS
                                    терміналів) що даний термінал використовує фіскалізацію. Також
                                    необхідно ввести ліцензійний ключ та пін код касира, отримані з
                                    налаштувань кас в особистому кабінеті CheckBox. Аналогічно
                                    вбудованому ПРРО перед початком роботи необхідно відкрити зміну
                                    в АРМ касира та закрити після закінчення роботи.
                                </p>

                                <h2 class="page-nav--target" id="id12">
                                    API для iнтеграцiї з боку зовнiшнiх систем.
                                </h2>

                                <p>
                                    API призначено для iнтеграцiї зi стороннiми системами та
                                    мобiльними додатками. За допомогую API можна синхронiзувати
                                    довiдники номенклатури та контрагеннтiв, отримувати та
                                    створювати документи, та iн. Опис API за адресою &lt;сайт
                                    складу&gt;/api/help
                                </p>

                                <h2 class="page-nav--target" id="id13">Iнтеграція з ВчасноКаса.</h2>

                                <p>
                                    Для відправки чеків в ДПС яерез ВчасноКаса потрібно ввімкнути
                                    модуль в загальних налаштуваннях та вкзати в довіднику кас (POS
                                    терміналів) що даний термінал використовує фіскалізацію. Також
                                    необхідно ввести токен доступу, отриманий з налаштувань кас в
                                    особистому кабінеті ВчасноКаса.
                                </p>

                                <p>
                                    Аналогічно вбудованому ПРРО перед початком роботи необхідно
                                    відкрити зміну в АРМ касира та закрити після закінчення роботи.
                                </p>

                                <h2 class="page-nav--target" id="id14">
                                    Iнтеграція з ВчасноДокументооборот
                                </h2>

                                <p>
                                    Модуль для відправки документів в сервіс з можливістю накладання
                                    цифрового підпису (КЕП). Перед початком роботи потрібно отримати
                                    токен з налаштувань компанії в сервісі і задати його в
                                    налаштуваннях відповідної компанії в довіднику компаній. ЄДРПОУ
                                    компаії також повинно відповідати заданому в компаії з Вчасно.
                                </p>

                                <p>
                                    На сторінці переліку документів можна відібрати документи для
                                    відправки в сервіс, або відмітити непотрібні документи (ніби як
                                    відправлені), щоб більше не виводились у переліку. Також можливо
                                    вибрати компанію (в довіднику компаній), в якій завантажено
                                    приватний ключ для накладання ЕЦП (КЕП) аналогічно, як і в
                                    модулі РРО. В такому разі документ відправиться в сервіс вже
                                    підписаним.
                                </p>

                                <h2 class="page-nav--target" id="id15">
                                    Пiдключення та використання принтерiв та торгiвельного
                                    обладнання
                                </h2>

                                <h3>Використання принтерiв</h3>

                                <p>
                                    У програмі може бути використано два типи принтерів – широкий
                                    (А4) та вузький (чековий). Широкий принтер призначений для
                                    виведення друкованих форм первинних документів (накладних тощо).
                                    Підключається як звичайний системний принтер і не потребує будь
                                    яких налаштувань у програмі. Вузький принтер призначений для
                                    друку чеків, квитанцій, а також цінників та етикеток. Може бути
                                    підключений як системний або, при низькій якості друку, через
                                    додаткове ПЗ (сервер друку). Тип підключення задається у профілі
                                    користувача.
                                </p>

                                <p>
                                    Для вузького принтера створюються окремі шаблони друкованих форм
                                    у папці templates/printform, структура яких залежить від типу
                                    підключення. Якщо принтер підключений як системний, його
                                    друковані форми містять html розмітку як і форми стандартного
                                    широкого принтера, а друк здійснюється браузером через системний
                                    драйвер. Якщо принтер підключений через сервер друку (див.
                                    нижче), друковані форми (з суфіксом _ps або _ts ) містять
                                    спеціальну розмітку в XML, яка відповідає набору команд
                                    принтера.
                                </p>

                                <p>
                                    Вузькі принтери зазвичай підтримують один із двох (або обидва)
                                    режимів друку - receipt (ESC/POS) для чеків та label
                                    (tspl/tspl2) для етикеток. У налаштуваннях принтера (профіль
                                    користувача) необхідно встановити в якому режимі принтер.
                                    (Етикетки можна друкувати і в режимі receipt).
                                </p>

                                <p>
                                    В режимі label можна використовувати Zebra та інші строкові
                                    протоколи для tspl/tspl2. Шаблони для чекового (receipt) режиму
                                    зберігаються у файлах з ім'ям, що закінчується на _ps
                                    (наприклад, poscheck_bill_ps.tpl) для режиму label на _ts
                                    (наприклад item_tag_ts.tpl ). Як і всі шаблони їх можна
                                    катомізувати додавши до кінця імені _custom щоб не перезатирало
                                    при оновленні. Наприелад item_tag_ps_custom.tpl
                                </p>

                                <p>
                                    Для розмітки шаблонів відповідно використовуються спеціальні
                                    теги, що перетворюються на ESC/POS команди (див. нижче) або
                                    безпосередньо команди tspl/rspl2 (див. документацію до принтера)
                                </p>

                                <ul>
                                    <li>printforms/item_tag.tpl - шаблон етикетки товару</li>
                                    <li>printforms/item_qr.tpl - шаблон QR коду товару</li>
                                    <li>
                                        printforms/item_sticker.tpl - шаблон стікера вагового товару
                                    </li>
                                    <li>printforms/pays_bill.tpl - квитанція про оплату</li>
                                    <li>
                                        printforms/doc/*_bill.tpl - решта шаблонів відповідають
                                        назві документів
                                    </li>
                                </ul>

                                <h3>Опис тегів шаблонів друкованих форм для ESC/POS принтера</h3>

                                <p>
                                    Шаблон повинен відповідати структурі XML. Як правило, теги
                                    визначають відповідні команди для принтера. Теги можуть мати
                                    обов'язкові або необов'язкові атрибути. Також реалізація
                                    декотрих тегів як, наприклад, cut або beep залежить від моделі
                                    принтера. Некоректно вказані теги будуть пропущені.
                                </p>

                                <p>Опис тегів</p>

                                <p>Опис команд для принтерів в режимі Label тут</p>

                                <p>
                                    Для реалізації логіки в шаблоні використовується синтаксис
                                    шаблонізатора Mustache
                                </p>

                                <h3>Допоміжне ПЗ - POS сервер</h3>

                                <p>
                                    Позаяк програма працює в онлайн режимі через браузер -
                                    підключення принтерів (крім системного принтера на який брауер
                                    може друкувати безпосередньо ) та торгівельного обладнання
                                    проблематично без допоміжного забезпечення.
                                </p>

                                <p>
                                    POS сервер реалізований як локальний веб-сервер, що приймає
                                    команди, що відправляються з браузера як на будь-який інший
                                    веб-сервер і виконує роль проміжної ланки POS сервер виконаний у
                                    двох варіантах для Віндовс та кроссплатформенний для NodeJs.
                                </p>

                                <p>
                                    Обидва рішення – проекти з відкритим кодом, розташовані на
                                    GitHub відповідно за адресами
                                </p>

                                <ul>
                                    <li>
                                        <a href="https://github.com/leon-mbs/pservernet"
                                            >POS Server Net (Windows)</a
                                        >
                                    </li>
                                    <li>
                                        <a href="https://github.com/leon-mbs/pservernode"
                                            >POS Server Node</a
                                        >
                                    </li>
                                </ul>

                                <p>
                                    Для віндовс можна скачати готову
                                    <a href="/download/PosServerNet.zip">готову збірку</a>
                                </p>

                                <p>
                                    В обох проектах реалізований режим принт сервера для чекових
                                    принтерів і принтерів етикеток, що підключаються по USB.
                                </p>

                                <p>
                                    Реалізація інших режимів залежить від обладнання та покладається
                                    на сторонніх розробників. Для роботи зі складом у серверах
                                    передбачений конкретний інтерфейс обміну (API) командами і
                                    даними, що розуміється складською програмою, однаковий для
                                    будь-якого обладнання.
                                </p>

                                <p>
                                    Адреса та порт серверів задається в appsettings.json та
                                    config.json відповідно За замовчанням http://127.0.0.1:8080.
                                    Сервери повинні бути розташованим на тому самому компьютері обо
                                    в тій самій локальній мережі де користувач прицює з браузера.
                                </p>

                                <p>
                                    Перевірити що сервер стартував нормально можна набравши в
                                    браузері http://127.0.0.1:8080/check. Звісно ж сервер може бути
                                    доданий в меню автостарту Віндовс.
                                </p>

                                <p>
                                    Дана реалізація може бути як приклад - POS сервер може бути
                                    реалізований на будь-якому іншому технологічному стеку, якщо
                                    буде реалізований аналогічний інтерфейс обміну з складом.
                                </p>

                                <h3>Сервер друку для чекових принтерів</h3>

                                <p>
                                    Підключення принтера через сервер друку дозволяє виводити
                                    інформацію (включаючи штрих коди) безпосередньо за допомогою
                                    спеціальних команд принтера, що забезпечує кращу якість друку.
                                    Тобто спеціалізована чекова інформація виводиться призначеними
                                    для цього апаратними та програмними засобами.
                                </p>

                                <p>
                                    Обидві програми можна перевірити з браузера, набравши
                                    http://127.0.0.1:8080/testprint (
                                    http://127.0.0.1:8080/testprintlabel для принтера етикеток в
                                    режимі Label). Повинна надрукуватись строка на принетрі.
                                </p>

                                <p>
                                    В варіанті принт сервера для віндовс в конфігураційному файл
                                    appsettings.json повиненна бути прописана назва принтера
                                    відповідно тому як вона записана в системі в списку принтерів.
                                </p>

                                <p>
                                    Робочий адрес (за замовчанням http://127.0.0.1:8080 ) задається
                                    в налаштуваннях профiлю користувача складу.
                                </p>

                                <h4>Електронні ваги</h4>

                                <p>
                                    Позаяк електронні ваги мають різне підключення і ПЗ
                                    користувачеві необхідно самостійно реалізуватим інтерфейс
                                    підключення.
                                </p>

                                <p>
                                    В POS сервері повиннен бути реалізований метод /scale, який
                                    поверне вагу в кг
                                </p>

                                <p>
                                    Адреса серверу задається в профілі коритсувача аналогічно
                                    серверам друку (скоріше за все це буде той самий сервер). В
                                    такому випадку при друку стікера вогового товару в довіднику ТМЦ
                                    або в АРМ касира біля поля вводу кількость буде кнопка
                                    зчитування даних з електронних ваг.
                                </p>

                                <h4>Банківський термінал</h4>

                                <p>В розробці</p>
                            </article>
                        </div>
                    </div>
                </div>
            </main>
            <!-- end content -->

            {{> footer}}
        </div>

        {{> contacts-form}} {{> scripts}}
    </body>
</html>
